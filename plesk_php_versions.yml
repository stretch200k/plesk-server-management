---
- name: Installeer en activeer gewenste PHP-versies in Plesk
  hosts: all
  become: yes

  tasks:
    - name: Installeer PHP-versies via Plesk CLI
      shell: |
        plesk installer add --components php{{ item }}
      args:
        warn: false
      loop:
        - 8.4
        - 8.3
        - 8.2
        - 8.1
        - 8.0
        - 7.4
        - 7.3
        - 7.2
        - 7.1
        - 7.0

    - name: Zorg dat PHP van OS-leverancier actief is
      shell: |
        plesk bin php_handler --enable -id "$(plesk bin php_handler --list | grep 'os' | awk '{print $1}')"
      args:
        warn: false
